{"ast":null,"code":"import _objectSpread from\"/Users/hamirizafirdhanardyasta/Documents/Hamiriza's/fullstackopen/part2/the_phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/hamirizafirdhanardyasta/Documents/Hamiriza's/fullstackopen/part2/the_phonebook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Filter from\"./components/Filter\";import PersonForm from\"./components/PersonForm\";import Content from\"./components/Content\";import phonebookService from\"./services/phonebook\";import Notifications from\"./components/Notifications\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),newFilter=_useState8[0],setNewFilter=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),filteredPersons=_useState10[0],setFilteredPersons=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),successMessage=_useState12[0],setSuccessMessage=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),errorMessage=_useState14[0],setErrorMessage=_useState14[1];useEffect(function(){phonebookService.getAll().then(function(persons){return setPersons(persons);});},[]);var addPerson=function addPerson(event){event.preventDefault();var newPerson={name:newName,number:newNumber};if(persons.some(function(person){return person.name.toUpperCase()===newName.toUpperCase();})){var personToUpdate=persons.find(function(p){return p.name===newName;});var confirmed=window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with new one\"));if(!confirmed)return;var changedPerson=_objectSpread(_objectSpread({},personToUpdate),{},{number:newNumber});phonebookService.update(personToUpdate.id,changedPerson).then(function(returnedPerson){setSuccessMessage(\"Changed \".concat(returnedPerson.name,\"'s number\"));setTimeout(function(){return setSuccessMessage(\"\");},5000);setPersons(persons.map(function(person){return person.name!==newName?person:returnedPerson;}));setNewNumber(\"\");setNewName(\"\");}).catch(function(error){setErrorMessage(\"Information of \".concat(changedPerson.name,\" has already been removed from server\"));setTimeout(function(){return setErrorMessage(\"\");},5000);});}else{phonebookService.create(newPerson).then(function(returnedPerson){setSuccessMessage(\"Added \".concat(returnedPerson.name));setTimeout(function(){return setSuccessMessage(\"\");},5000);setPersons(persons.concat(returnedPerson));setNewNumber(\"\");setNewName(\"\");}).catch(function(error){setErrorMessage(error.response.data.error);setTimeout(function(){return setErrorMessage(\"\");},5000);setNewNumber(\"\");setNewName(\"\");console.log(error.response.data);});}};var handleFilter=function handleFilter(event){setNewFilter(event.target.value);};useEffect(function(){var regex=new RegExp(newFilter,\"i\");var results=persons.filter(function(person){return person.name.match(regex);});setFilteredPersons(results);},[newFilter,persons]);var removePerson=function removePerson(id){var personToRemove=persons.find(function(p){return p.id===id;});var confirmed=window.confirm(\"Delete \".concat(personToRemove.name));if(!confirmed)return;setPersons(persons.filter(function(p){return p.id!==id;}));phonebookService.remove(id).then(function(){return console.log(\"Removed \".concat(personToRemove.name,\" succesfully\"));});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(Notifications,{successMessage:successMessage,errorMessage:errorMessage}),/*#__PURE__*/_jsx(Filter,{value:newFilter,onChange:handleFilter}),/*#__PURE__*/_jsx(\"h2\",{children:\"add a new\"}),/*#__PURE__*/_jsx(PersonForm,{onSubmit:addPerson,newName:newName,handleName:function handleName(event){return setNewName(event.target.value);},newNumber:newNumber,handleNumber:function handleNumber(event){return setNewNumber(event.target.value);}}),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Content,{persons:persons,filteredPersons:filteredPersons,removePerson:removePerson})]});};export default App;","map":{"version":3,"sources":["/Users/hamirizafirdhanardyasta/Documents/Hamiriza's/fullstackopen/part2/the_phonebook/src/App.js"],"names":["React","useState","useEffect","Filter","PersonForm","Content","phonebookService","Notifications","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","filteredPersons","setFilteredPersons","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getAll","then","addPerson","event","preventDefault","newPerson","name","number","some","person","toUpperCase","personToUpdate","find","p","confirmed","window","confirm","changedPerson","update","id","returnedPerson","setTimeout","map","catch","error","create","concat","response","data","console","log","handleFilter","target","value","regex","RegExp","results","filter","match","removePerson","personToRemove","remove"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Content from \"./components/Content\";\nimport phonebookService from \"./services/phonebook\";\nimport Notifications from \"./components/Notifications\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    phonebookService.getAll().then((persons) => setPersons(persons));\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    if (\n      persons.some(\n        (person) => person.name.toUpperCase() === newName.toUpperCase()\n      )\n    ) {\n      const personToUpdate = persons.find((p) => p.name === newName);\n      const confirmed = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with new one`\n      );\n      if (!confirmed) return;\n\n      const changedPerson = { ...personToUpdate, number: newNumber };\n      phonebookService\n        .update(personToUpdate.id, changedPerson)\n        .then((returnedPerson) => {\n          setSuccessMessage(`Changed ${returnedPerson.name}'s number`);\n          setTimeout(() => setSuccessMessage(\"\"), 5000);\n          setPersons(\n            persons.map((person) =>\n              person.name !== newName ? person : returnedPerson\n            )\n          );\n          setNewNumber(\"\");\n          setNewName(\"\");\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Information of ${changedPerson.name} has already been removed from server`\n          );\n          setTimeout(() => setErrorMessage(\"\"), 5000);\n        });\n    } else {\n      phonebookService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setSuccessMessage(`Added ${returnedPerson.name}`);\n          setTimeout(() => setSuccessMessage(\"\"), 5000);\n          setPersons(persons.concat(returnedPerson));\n          setNewNumber(\"\");\n          setNewName(\"\");\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => setErrorMessage(\"\"), 5000);\n          setNewNumber(\"\");\n          setNewName(\"\");\n          console.log(error.response.data);\n        });\n    }\n  };\n\n  const handleFilter = (event) => {\n    setNewFilter(event.target.value);\n  };\n\n  useEffect(() => {\n    const regex = new RegExp(newFilter, \"i\");\n    const results = persons.filter((person) => person.name.match(regex));\n    setFilteredPersons(results);\n  }, [newFilter, persons]);\n\n  const removePerson = (id) => {\n    const personToRemove = persons.find((p) => p.id === id);\n    const confirmed = window.confirm(`Delete ${personToRemove.name}`);\n    if (!confirmed) return;\n\n    setPersons(persons.filter((p) => p.id !== id));\n\n    phonebookService\n      .remove(id)\n      .then(() => console.log(`Removed ${personToRemove.name} succesfully`));\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notifications\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <Filter value={newFilter} onChange={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addPerson}\n        newName={newName}\n        handleName={(event) => setNewName(event.target.value)}\n        newNumber={newNumber}\n        handleNumber={(event) => setNewNumber(event.target.value)}\n      />\n      <h2>Numbers</h2>\n      <Content\n        persons={persons}\n        filteredPersons={filteredPersons}\n        removePerson={removePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}