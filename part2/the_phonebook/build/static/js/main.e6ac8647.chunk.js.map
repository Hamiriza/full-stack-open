{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Content.js","services/phonebook.js","components/Notifications.js","App.js","index.js"],"names":["Filter","value","onChange","PersonForm","onSubmit","newName","handleName","newNumber","handleNumber","type","Person","name","number","removePerson","onClick","Content","persons","filteredPersons","length","map","person","index","id","baseUrl","phonebookService","getAll","axios","get","then","response","data","create","newObject","post","remove","delete","update","put","Notifications","successMessage","errorMessage","className","App","useState","setPersons","setNewName","setNewNumber","newFilter","setNewFilter","setFilteredPersons","setSuccessMessage","setErrorMessage","useEffect","regex","RegExp","results","filter","match","event","target","preventDefault","newPerson","some","toUpperCase","personToUpdate","find","p","window","confirm","changedPerson","returnedPerson","setTimeout","catch","error","concat","console","log","personToRemove","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.e6ac8647.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ value, onChange }) => (\n  <div>\n    filter shown with <input value={value} onChange={onChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({\n  onSubmit,\n  newName,\n  handleName,\n  newNumber,\n  handleNumber,\n}) => (\n  <form onSubmit={onSubmit}>\n    <div>\n      name:\n      <input value={newName} onChange={handleName} />\n    </div>\n    <div>\n      number:\n      <input value={newNumber} onChange={handleNumber} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ name, number, removePerson }) => {\n  return (\n    <li>\n      {name} {number}\n      <button onClick={removePerson}>delete</button>\n    </li>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Content = ({ persons, filteredPersons, removePerson }) => {\n  if (filteredPersons.length === 0) {\n    return (\n      <ul>\n        {persons.map((person, index) => (\n          <Person\n            key={index}\n            name={person.name}\n            number={person.number}\n            removePerson={() => removePerson(person.id)}\n          />\n        ))}\n      </ul>\n    );\n  } else {\n    return (\n      <ul>\n        {filteredPersons.map((person, index) => (\n          <Person\n            key={index}\n            name={person.name}\n            number={person.number}\n            removePerson={() => removePerson(person.id)}\n          />\n        ))}\n      </ul>\n    );\n  }\n};\n\nexport default Content;\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst create = (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then((response) => response.data);\n};\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newObject) => {\n  return axios\n    .put(`${baseUrl}/${id}`, newObject)\n    .then((response) => response.data);\n};\n\nconst phonebookService = { getAll, create, remove, update };\n\nexport default phonebookService;\n","import React from \"react\";\n\nconst Notifications = ({ successMessage, errorMessage }) => {\n  if (successMessage === null && errorMessage === null) {\n    return null;\n  } else if (errorMessage !== \"\") {\n    return <div className=\"errorMessage\">{errorMessage}</div>;\n  } else if (successMessage !== \"\") {\n    return <div className=\"successMessage\">{successMessage}</div>;\n  }\n  return null;\n};\n\nexport default Notifications;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Content from \"./components/Content\";\nimport phonebookService from \"./services/phonebook\";\nimport Notifications from \"./components/Notifications\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState(\"\");\n  const [successMessage, setSuccessMessage] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  useEffect(() => {\n    phonebookService.getAll().then((persons) => setPersons(persons));\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n    if (\n      persons.some(\n        (person) => person.name.toUpperCase() === newName.toUpperCase()\n      )\n    ) {\n      const personToUpdate = persons.find((p) => p.name === newName);\n      const confirmed = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with new one`\n      );\n      if (!confirmed) return;\n\n      const changedPerson = { ...personToUpdate, number: newNumber };\n      phonebookService\n        .update(personToUpdate.id, changedPerson)\n        .then((returnedPerson) => {\n          setSuccessMessage(`Changed ${returnedPerson.name}'s number`);\n          setTimeout(() => setSuccessMessage(\"\"), 5000);\n          setPersons(\n            persons.map((person) =>\n              person.name !== newName ? person : returnedPerson\n            )\n          );\n          setNewNumber(\"\");\n          setNewName(\"\");\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Information of ${changedPerson.name} has already been removed from server`\n          );\n          setTimeout(() => setErrorMessage(\"\"), 5000);\n        });\n    } else {\n      phonebookService\n        .create(newPerson)\n        .then((returnedPerson) => {\n          setSuccessMessage(`Added ${returnedPerson.name}`);\n          setTimeout(() => setSuccessMessage(\"\"), 5000);\n          setPersons(persons.concat(returnedPerson));\n          setNewNumber(\"\");\n          setNewName(\"\");\n        })\n        .catch((error) => {\n          setErrorMessage(error.response.data.error);\n          setTimeout(() => setErrorMessage(\"\"), 5000);\n          setNewNumber(\"\");\n          setNewName(\"\");\n          console.log(error.response.data);\n        });\n    }\n  };\n\n  const handleFilter = (event) => {\n    setNewFilter(event.target.value);\n  };\n\n  useEffect(() => {\n    const regex = new RegExp(newFilter, \"i\");\n    const results = persons.filter((person) => person.name.match(regex));\n    setFilteredPersons(results);\n  }, [newFilter, persons]);\n\n  const removePerson = (id) => {\n    const personToRemove = persons.find((p) => p.id === id);\n    const confirmed = window.confirm(`Delete ${personToRemove.name}`);\n    if (!confirmed) return;\n\n    setPersons(persons.filter((p) => p.id !== id));\n\n    phonebookService\n      .remove(id)\n      .then(() => console.log(`Removed ${personToRemove.name} succesfully`));\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notifications\n        successMessage={successMessage}\n        errorMessage={errorMessage}\n      />\n      <Filter value={newFilter} onChange={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        onSubmit={addPerson}\n        newName={newName}\n        handleName={(event) => setNewName(event.target.value)}\n        newNumber={newNumber}\n        handleNumber={(event) => setNewNumber(event.target.value)}\n      />\n      <h2>Numbers</h2>\n      <Content\n        persons={persons}\n        filteredPersons={filteredPersons}\n        removePerson={removePerson}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.js\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}